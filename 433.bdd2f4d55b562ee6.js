"use strict";(self.webpackChunkCFM=self.webpackChunkCFM||[]).push([[433],{5433:(L,d,i)=>{i.r(d),i.d(d,{GuesthouseExpensesComponent:()=>N});var p=i(177),_=i(5596),m=i(9159),g=i(8834),E=i(9213),C=i(5351),c=i(882),x=i(9631),f=i(2798),l=i(5084),r=i(9417),h=i(6354),e=i(4438),M=i(8498),O=i(3370),P=i(6600);function F(t,s){if(1&t&&(e.j41(0,"div",5)(1,"span",6),e.EFF(2),e.k0s(),e.j41(3,"span",7),e.EFF(4),e.nI1(5,"currency"),e.k0s()()),2&t){const n=s.$implicit,a=e.XpG().ngIf,o=e.XpG();e.R7$(2),e.JRh(n),e.R7$(2),e.JRh(e.bMT(5,2,o.getCategoryTotal(a.expenses,n)))}}function D(t,s){if(1&t&&(e.j41(0,"mat-option",32),e.EFF(1),e.k0s()),2&t){const n=s.$implicit;e.Y8G("value",n),e.R7$(),e.SpI(" ",n," ")}}function v(t,s){1&t&&(e.j41(0,"th",33),e.EFF(1,"Date"),e.k0s())}function y(t,s){if(1&t&&(e.j41(0,"td",34),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&t){const n=s.$implicit;e.R7$(),e.JRh(e.bMT(2,1,n.date))}}function R(t,s){1&t&&(e.j41(0,"th",33),e.EFF(1,"Category"),e.k0s())}function T(t,s){if(1&t&&(e.j41(0,"td",34),e.EFF(1),e.k0s()),2&t){const n=s.$implicit;e.R7$(),e.JRh(n.category)}}function b(t,s){1&t&&(e.j41(0,"th",33),e.EFF(1,"Description"),e.k0s())}function G(t,s){if(1&t&&(e.j41(0,"td",34),e.EFF(1),e.k0s()),2&t){const n=s.$implicit;e.R7$(),e.JRh(n.description)}}function I(t,s){1&t&&(e.j41(0,"th",33),e.EFF(1,"Amount"),e.k0s())}function j(t,s){if(1&t&&(e.j41(0,"td",34),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&t){const n=s.$implicit;e.R7$(),e.JRh(e.bMT(2,1,n.amount))}}function k(t,s){1&t&&(e.j41(0,"th",33),e.EFF(1,"Paid By"),e.k0s())}function $(t,s){if(1&t&&(e.j41(0,"td",34),e.EFF(1),e.k0s()),2&t){const n=s.$implicit;e.R7$(),e.JRh(n.paidBy)}}function B(t,s){1&t&&e.nrm(0,"tr",35)}function A(t,s){1&t&&e.nrm(0,"tr",36)}function U(t,s){if(1&t){const n=e.RV6();e.j41(0,"div",2)(1,"mat-card",3)(2,"mat-card-header")(3,"mat-card-title"),e.EFF(4),e.k0s(),e.j41(5,"mat-card-subtitle"),e.EFF(6),e.k0s()(),e.j41(7,"mat-card-content")(8,"div",4)(9,"div",5)(10,"span",6),e.EFF(11,"Total Expenses"),e.k0s(),e.j41(12,"span",7),e.EFF(13),e.nI1(14,"currency"),e.k0s()(),e.DNE(15,F,6,4,"div",8),e.k0s(),e.j41(16,"form",9),e.bIt("ngSubmit",function(){const o=e.eBV(n).ngIf,u=e.XpG();return e.Njj(u.onSubmit(o))}),e.j41(17,"h3"),e.EFF(18,"Add New Expense"),e.k0s(),e.j41(19,"div",10)(20,"mat-form-field",11)(21,"mat-label"),e.EFF(22,"Date"),e.k0s(),e.nrm(23,"input",12)(24,"mat-datepicker-toggle",13)(25,"mat-datepicker",null,0),e.k0s(),e.j41(27,"mat-form-field",11)(28,"mat-label"),e.EFF(29,"Category"),e.k0s(),e.j41(30,"mat-select",14),e.DNE(31,D,2,2,"mat-option",15),e.k0s()()(),e.j41(32,"div",10)(33,"mat-form-field",11)(34,"mat-label"),e.EFF(35,"Description"),e.k0s(),e.nrm(36,"input",16),e.k0s(),e.j41(37,"mat-form-field",11)(38,"mat-label"),e.EFF(39,"Amount"),e.k0s(),e.nrm(40,"input",17),e.j41(41,"span",18),e.EFF(42,"$\xa0"),e.k0s()(),e.j41(43,"mat-form-field",11)(44,"mat-label"),e.EFF(45,"Paid By"),e.k0s(),e.nrm(46,"input",19),e.k0s()(),e.j41(47,"div",20)(48,"button",21),e.EFF(49," Add Expense "),e.k0s()()(),e.j41(50,"table",22),e.qex(51,23),e.DNE(52,v,2,0,"th",24)(53,y,3,3,"td",25),e.bVm(),e.qex(54,26),e.DNE(55,R,2,0,"th",24)(56,T,2,1,"td",25),e.bVm(),e.qex(57,27),e.DNE(58,b,2,0,"th",24)(59,G,2,1,"td",25),e.bVm(),e.qex(60,28),e.DNE(61,I,2,0,"th",24)(62,j,3,3,"td",25),e.bVm(),e.qex(63,29),e.DNE(64,k,2,0,"th",24)(65,$,2,1,"td",25),e.bVm(),e.DNE(66,B,1,0,"tr",30)(67,A,1,0,"tr",31),e.k0s()()()()}if(2&t){const n=s.ngIf,a=e.sdS(26),o=e.XpG();e.R7$(4),e.SpI("",n.name," - Expenses"),e.R7$(2),e.JRh(n.address),e.R7$(7),e.JRh(e.bMT(14,12,o.getTotalExpenses(n.expenses))),e.R7$(2),e.Y8G("ngForOf",o.expenseCategories),e.R7$(),e.Y8G("formGroup",o.expenseForm),e.R7$(7),e.Y8G("matDatepicker",a),e.R7$(),e.Y8G("for",a),e.R7$(7),e.Y8G("ngForOf",o.expenseCategories),e.R7$(17),e.Y8G("disabled",!o.expenseForm.valid),e.R7$(2),e.Y8G("dataSource",n.expenses),e.R7$(16),e.Y8G("matHeaderRowDef",o.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",o.displayedColumns)}}let N=(()=>{class t{constructor(n,a,o){this.route=n,this.guestHouseService=a,this.fb=o,this.displayedColumns=["date","category","description","amount","paidBy"],this.expenseCategories=["UTILITIES","MAINTENANCE","SUPPLIES","OTHER"],this.expenseForm=this.fb.group({date:["",r.k0.required],category:["",r.k0.required],description:["",r.k0.required],amount:["",[r.k0.required,r.k0.min(0)]],paidBy:["",r.k0.required]})}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");n&&(this.guestHouse$=this.guestHouseService.getGuestHouses().pipe((0,h.T)(a=>{const o=a.find(u=>u.id===+n);if(!o)throw new Error(`Guest house with id ${n} not found`);return o})))}onSubmit(n){if(this.expenseForm.valid){const a={date:new Date(this.expenseForm.value.date),category:this.expenseForm.value.category,description:this.expenseForm.value.description,amount:+this.expenseForm.value.amount,paidBy:this.expenseForm.value.paidBy};this.guestHouseService.addExpense(n.id,a),this.expenseForm.reset()}}getTotalExpenses(n){return n.reduce((a,o)=>a+o.amount,0)}getExpensesByCategory(n,a){return n.filter(o=>o.category===a)}getCategoryTotal(n,a){return this.getExpensesByCategory(n,a).reduce((o,u)=>o+u.amount,0)}static#e=this.\u0275fac=function(a){return new(a||t)(e.rXU(M.nX),e.rXU(O.O),e.rXU(r.ok))};static#t=this.\u0275cmp=e.VBU({type:t,selectors:[["app-guesthouse-expenses"]],standalone:!0,features:[e.aNF],decls:2,vars:3,consts:[["picker",""],["class","expenses-container",4,"ngIf"],[1,"expenses-container"],[1,"main-info"],[1,"expense-summary"],[1,"summary-item"],[1,"label"],[1,"value"],["class","summary-item",4,"ngFor","ngForOf"],[1,"expense-form",3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline"],["matInput","","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","description"],["matInput","","type","number","formControlName","amount"],["matPrefix",""],["matInput","","formControlName","paidBy"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-table","",1,"expense-table",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","description"],["matColumnDef","amount"],["matColumnDef","paidBy"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(a,o){1&a&&(e.DNE(0,U,68,14,"div",1),e.nI1(1,"async")),2&a&&e.Y8G("ngIf",e.bMT(1,1,o.guestHouse$))},dependencies:[p.MD,p.Sq,p.bT,p.Jj,p.oe,p.vh,_.Hu,_.RN,_.m2,_.MM,_.Lc,_.dh,m.tP,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,g.Hl,g.$z,E.m_,C.hM,c.RG,c.rl,c.nJ,c.JW,c.yw,x.fS,x.fg,f.Ve,f.VO,P.wT,l.X6,l.Vh,l.bZ,l.bU,r.X1,r.qT,r.me,r.Q0,r.BC,r.cb,r.j4,r.JD],styles:[".expenses-container[_ngcontent-%COMP%]{padding:20px}.expenses-container[_ngcontent-%COMP%]   .main-info[_ngcontent-%COMP%]{margin-bottom:20px}.expenses-container[_ngcontent-%COMP%]   .expense-summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px;padding:20px;background-color:#f5f5f5;border-radius:4px}.expenses-container[_ngcontent-%COMP%]   .expense-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.expenses-container[_ngcontent-%COMP%]   .expense-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:8px}.expenses-container[_ngcontent-%COMP%]   .expense-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#333}.expenses-container[_ngcontent-%COMP%]   .expense-form[_ngcontent-%COMP%]{margin-bottom:30px;padding:20px;background-color:#fff;border-radius:4px;box-shadow:0 2px 4px #0000001a}.expenses-container[_ngcontent-%COMP%]   .expense-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:20px}.expenses-container[_ngcontent-%COMP%]   .expense-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px}.expenses-container[_ngcontent-%COMP%]   .expense-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.expenses-container[_ngcontent-%COMP%]   .expense-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.expenses-container[_ngcontent-%COMP%]   .expense-table[_ngcontent-%COMP%]{width:100%}.expenses-container[_ngcontent-%COMP%]   .expense-table[_ngcontent-%COMP%]   .mat-column-date[_ngcontent-%COMP%], .expenses-container[_ngcontent-%COMP%]   .expense-table[_ngcontent-%COMP%]   .mat-column-category[_ngcontent-%COMP%]{width:120px}.expenses-container[_ngcontent-%COMP%]   .expense-table[_ngcontent-%COMP%]   .mat-column-amount[_ngcontent-%COMP%]{width:120px;text-align:right}.expenses-container[_ngcontent-%COMP%]   .expense-table[_ngcontent-%COMP%]   .mat-column-paidBy[_ngcontent-%COMP%]{width:120px}"]})}return t})()}}]);