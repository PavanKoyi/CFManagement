import{g as De}from"./chunk-MANN2R7Z.js";import{a as A,b as $,c as V,d as q,e as j,f as L,g as z,h as U,i as J,j as K,k as Q}from"./chunk-TMYIM7FB.js";import{b as Y}from"./chunk-BIG5SBWC.js";import{a as be}from"./chunk-WQO7UOZX.js";import{a as he,b as ye,c as Ee,d as Se,e as Pe,f as Oe}from"./chunk-KGI4YOJ3.js";import{a as W,c as X,d as Z,e as ee,f as te,g as ne,i as ie,k as oe,l as xe,n as fe,o as _e,r as ge,s as Ce,u as Me,v as ve}from"./chunk-CMH7VPW4.js";import{Ab as H,Bb as N,Ea as i,Fa as t,Ga as u,Ha as f,Hb as k,Ia as _,Ka as b,Na as D,P as S,Pa as M,Tc as R,U as P,V as O,Wa as I,Xa as a,Ya as c,Za as y,_c as ae,ad as x,cd as re,dd as me,eb as w,fa as s,ga as v,gd as se,hb as g,hd as pe,ib as C,id as le,kd as de,ld as ce,m as E,nd as ue,ua as d,ub as T,vb as F,wa as l,xb as G,yb as B}from"./chunk-SBUFGK5X.js";function Ie(e,n){if(e&1&&(i(0,"div",5)(1,"span",6),a(2),t(),i(3,"span",7),a(4),g(5,"currency"),t()()),e&2){let r=n.$implicit,m=M().ngIf,o=M();s(2),c(r),s(2),c(C(5,2,o.getCategoryTotal(m.expenses,r)))}}function we(e,n){if(e&1&&(i(0,"mat-option",32),a(1),t()),e&2){let r=n.$implicit;l("value",r),s(),y(" ",r," ")}}function Te(e,n){e&1&&(i(0,"th",33),a(1,"Date"),t())}function Fe(e,n){if(e&1&&(i(0,"td",34),a(1),g(2,"date"),t()),e&2){let r=n.$implicit;s(),c(C(2,1,r.date))}}function Ge(e,n){e&1&&(i(0,"th",33),a(1,"Category"),t())}function Be(e,n){if(e&1&&(i(0,"td",34),a(1),t()),e&2){let r=n.$implicit;s(),c(r.category)}}function He(e,n){e&1&&(i(0,"th",33),a(1,"Description"),t())}function Ne(e,n){if(e&1&&(i(0,"td",34),a(1),t()),e&2){let r=n.$implicit;s(),c(r.description)}}function ke(e,n){e&1&&(i(0,"th",33),a(1,"Amount"),t())}function Re(e,n){if(e&1&&(i(0,"td",34),a(1),g(2,"currency"),t()),e&2){let r=n.$implicit;s(),c(C(2,1,r.amount))}}function Ae(e,n){e&1&&(i(0,"th",33),a(1,"Paid By"),t())}function $e(e,n){if(e&1&&(i(0,"td",34),a(1),t()),e&2){let r=n.$implicit;s(),c(r.paidBy)}}function Ve(e,n){e&1&&u(0,"tr",35)}function qe(e,n){e&1&&u(0,"tr",36)}function je(e,n){if(e&1){let r=b();i(0,"div",2)(1,"mat-card",3)(2,"mat-card-header")(3,"mat-card-title"),a(4),t(),i(5,"mat-card-subtitle"),a(6),t()(),i(7,"mat-card-content")(8,"div",4)(9,"div",5)(10,"span",6),a(11,"Total Expenses"),t(),i(12,"span",7),a(13),g(14,"currency"),t()(),d(15,Ie,6,4,"div",8),t(),i(16,"form",9),D("ngSubmit",function(){let o=P(r).ngIf,p=M();return O(p.onSubmit(o))}),i(17,"h3"),a(18,"Add New Expense"),t(),i(19,"div",10)(20,"mat-form-field",11)(21,"mat-label"),a(22,"Date"),t(),u(23,"input",12)(24,"mat-datepicker-toggle",13)(25,"mat-datepicker",null,0),t(),i(27,"mat-form-field",11)(28,"mat-label"),a(29,"Category"),t(),i(30,"mat-select",14),d(31,we,2,2,"mat-option",15),t()()(),i(32,"div",10)(33,"mat-form-field",11)(34,"mat-label"),a(35,"Description"),t(),u(36,"input",16),t(),i(37,"mat-form-field",11)(38,"mat-label"),a(39,"Amount"),t(),u(40,"input",17),i(41,"span",18),a(42,"$\xA0"),t()(),i(43,"mat-form-field",11)(44,"mat-label"),a(45,"Paid By"),t(),u(46,"input",19),t()(),i(47,"div",20)(48,"button",21),a(49," Add Expense "),t()()(),i(50,"table",22),f(51,23),d(52,Te,2,0,"th",24)(53,Fe,3,3,"td",25),_(),f(54,26),d(55,Ge,2,0,"th",24)(56,Be,2,1,"td",25),_(),f(57,27),d(58,He,2,0,"th",24)(59,Ne,2,1,"td",25),_(),f(60,28),d(61,ke,2,0,"th",24)(62,Re,3,3,"td",25),_(),f(63,29),d(64,Ae,2,0,"th",24)(65,$e,2,1,"td",25),_(),d(66,Ve,1,0,"tr",30)(67,qe,1,0,"tr",31),t()()()()}if(e&2){let r=n.ngIf,m=I(26),o=M();s(4),y("",r.name," - Expenses"),s(2),c(r.address),s(7),c(C(14,12,o.getTotalExpenses(r.expenses))),s(2),l("ngForOf",o.expenseCategories),s(),l("formGroup",o.expenseForm),s(7),l("matDatepicker",m),s(),l("for",m),s(7),l("ngForOf",o.expenseCategories),s(17),l("disabled",!o.expenseForm.valid),s(2),l("dataSource",r.expenses),s(16),l("matHeaderRowDef",o.displayedColumns),s(),l("matRowDefColumns",o.displayedColumns)}}var ft=(()=>{let n=class n{constructor(m,o,p){this.route=m,this.guestHouseService=o,this.fb=p,this.displayedColumns=["date","category","description","amount","paidBy"],this.expenseCategories=["UTILITIES","MAINTENANCE","SUPPLIES","OTHER"],this.expenseForm=this.fb.group({date:["",x.required],category:["",x.required],description:["",x.required],amount:["",[x.required,x.min(0)]],paidBy:["",x.required]})}ngOnInit(){let m=this.route.snapshot.paramMap.get("id");m&&(this.guestHouse$=this.guestHouseService.getGuestHouses().pipe(E(o=>{let p=o.find(h=>h.id===+m);if(!p)throw new Error(`Guest house with id ${m} not found`);return p})))}onSubmit(m){if(this.expenseForm.valid){let o={date:new Date(this.expenseForm.value.date),category:this.expenseForm.value.category,description:this.expenseForm.value.description,amount:+this.expenseForm.value.amount,paidBy:this.expenseForm.value.paidBy};this.guestHouseService.addExpense(m.id,o),this.expenseForm.reset()}}getTotalExpenses(m){return m.reduce((o,p)=>o+p.amount,0)}getExpensesByCategory(m,o){return m.filter(p=>p.category===o)}getCategoryTotal(m,o){return this.getExpensesByCategory(m,o).reduce((p,h)=>p+h.amount,0)}};n.\u0275fac=function(o){return new(o||n)(v(k),v(be),v(ce))},n.\u0275cmp=S({type:n,selectors:[["app-guesthouse-expenses"]],standalone:!0,features:[w],decls:2,vars:3,consts:[["picker",""],["class","expenses-container",4,"ngIf"],[1,"expenses-container"],[1,"main-info"],[1,"expense-summary"],[1,"summary-item"],[1,"label"],[1,"value"],["class","summary-item",4,"ngFor","ngForOf"],[1,"expense-form",3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline"],["matInput","","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","description"],["matInput","","type","number","formControlName","amount"],["matPrefix",""],["matInput","","formControlName","paidBy"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-table","",1,"expense-table",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","description"],["matColumnDef","amount"],["matColumnDef","paidBy"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(o,p){o&1&&(d(0,je,68,14,"div",1),g(1,"async")),o&2&&l("ngIf",C(1,1,p.guestHouse$))},dependencies:[N,T,F,G,H,B,oe,Z,te,ie,ne,ee,Q,A,V,z,q,$,U,j,L,J,K,X,W,Y,De,Ce,ge,xe,fe,_e,ve,Me,ye,he,R,Oe,Ee,Se,Pe,ue,se,ae,pe,re,me,le,de],styles:[".expenses-container[_ngcontent-%COMP%]{padding:20px}.expenses-container[_ngcontent-%COMP%]   .main-info[_ngcontent-%COMP%]{margin-bottom:20px}.expenses-container[_ngcontent-%COMP%]   .expense-summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px;padding:20px;background-color:#f5f5f5;border-radius:4px}.expenses-container[_ngcontent-%COMP%]   .expense-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.expenses-container[_ngcontent-%COMP%]   .expense-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:8px}.expenses-container[_ngcontent-%COMP%]   .expense-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#333}.expenses-container[_ngcontent-%COMP%]   .expense-form[_ngcontent-%COMP%]{margin-bottom:30px;padding:20px;background-color:#fff;border-radius:4px;box-shadow:0 2px 4px #0000001a}.expenses-container[_ngcontent-%COMP%]   .expense-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:20px}.expenses-container[_ngcontent-%COMP%]   .expense-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px}.expenses-container[_ngcontent-%COMP%]   .expense-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.expenses-container[_ngcontent-%COMP%]   .expense-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.expenses-container[_ngcontent-%COMP%]   .expense-table[_ngcontent-%COMP%]{width:100%}.expenses-container[_ngcontent-%COMP%]   .expense-table[_ngcontent-%COMP%]   .mat-column-date[_ngcontent-%COMP%], .expenses-container[_ngcontent-%COMP%]   .expense-table[_ngcontent-%COMP%]   .mat-column-category[_ngcontent-%COMP%]{width:120px}.expenses-container[_ngcontent-%COMP%]   .expense-table[_ngcontent-%COMP%]   .mat-column-amount[_ngcontent-%COMP%]{width:120px;text-align:right}.expenses-container[_ngcontent-%COMP%]   .expense-table[_ngcontent-%COMP%]   .mat-column-paidBy[_ngcontent-%COMP%]{width:120px}"]});let e=n;return e})();export{ft as GuesthouseExpensesComponent};
