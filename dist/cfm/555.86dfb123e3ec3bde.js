"use strict";(self.webpackChunkCFM=self.webpackChunkCFM||[]).push([[555],{555:($,M,n)=>{n.r(M),n.d(M,{GuestHouseFormComponent:()=>B});var R=n(177),r=n(9417),l=n(882),H=n(9631),k=n(2798),_=n(5084),I=n(8834),i=n(5596),d=n(8498),e=n(4438),G=n(3370),P=n(6600);function v(t,u){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Name is required "),e.k0s())}function T(t,u){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Address is required "),e.k0s())}function j(t,u){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Total rooms is required "),e.k0s())}function A(t,u){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Must have at least 1 room "),e.k0s())}function b(t,u){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Monthly rent is required "),e.k0s())}function L(t,u){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Monthly rent cannot be negative "),e.k0s())}function S(t,u){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Lease start date is required "),e.k0s())}function N(t,u){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Lease duration is required "),e.k0s())}function y(t,u){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Lease duration must be at least 1 month "),e.k0s())}function U(t,u){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Status is required "),e.k0s())}let B=(()=>{class t{constructor(a,s,o,m){this.fb=a,this.router=s,this.route=o,this.guestHouseService=m,this.isEditMode=!1}ngOnInit(){this.initializeForm(),this.route.params.subscribe(a=>{a.id&&(this.isEditMode=!0,this.guestHouseId=+a.id,this.loadGuestHouseData(this.guestHouseId))})}initializeForm(){this.guestHouseForm=this.fb.group({name:["",r.k0.required],address:["",r.k0.required],totalRooms:["",[r.k0.required,r.k0.min(1)]],monthlyRent:["",[r.k0.required,r.k0.min(0)]],leaseStartDate:["",r.k0.required],leaseDuration:["",[r.k0.required,r.k0.min(1)]],status:["AVAILABLE",r.k0.required]})}loadGuestHouseData(a){const s=this.guestHouseService.getGuestHouse(a);s&&this.guestHouseForm.patchValue({name:s.name,address:s.address,totalRooms:s.totalRooms,monthlyRent:s.monthlyRent,leaseStartDate:s.leaseStartDate,leaseDuration:s.leaseDuration,status:s.status})}onSubmit(){if(this.guestHouseForm.valid){const a=this.guestHouseForm.value;this.isEditMode&&this.guestHouseId?this.guestHouseService.updateGuestHouse({...a,id:this.guestHouseId,currentOccupants:0,currentResidents:[],expenses:[]}):this.guestHouseService.addGuestHouse({...a,currentOccupants:0,currentResidents:[],expenses:[]}),this.router.navigate(["/guesthouses"])}}static#e=this.\u0275fac=function(s){return new(s||t)(e.rXU(r.ok),e.rXU(d.Ix),e.rXU(d.nX),e.rXU(G.O))};static#t=this.\u0275cmp=e.VBU({type:t,selectors:[["app-guest-house-form"]],standalone:!0,features:[e.aNF],decls:60,vars:16,consts:[["leaseStartPicker",""],[1,"guesthouse-form-container"],[3,"ngSubmit","formGroup"],[1,"form-section"],["appearance","outline"],["matInput","","formControlName","name"],[4,"ngIf"],["matInput","","formControlName","address","rows","3"],["matInput","","type","number","formControlName","totalRooms"],["matInput","","type","number","formControlName","monthlyRent"],["matInput","","formControlName","leaseStartDate",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","type","number","formControlName","leaseDuration"],["formControlName","status"],["value","AVAILABLE"],["value","FULL"],["value","MAINTENANCE"],[1,"form-actions"],["mat-button","","type","button","routerLink","/guesthouses"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(s,o){if(1&s){const m=e.RV6();e.j41(0,"div",1)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),e.EFF(4),e.k0s()(),e.j41(5,"mat-card-content")(6,"form",2),e.bIt("ngSubmit",function(){return e.eBV(m),e.Njj(o.onSubmit())}),e.j41(7,"div",3)(8,"mat-form-field",4)(9,"mat-label"),e.EFF(10,"Name"),e.k0s(),e.nrm(11,"input",5),e.DNE(12,v,2,0,"mat-error",6),e.k0s(),e.j41(13,"mat-form-field",4)(14,"mat-label"),e.EFF(15,"Address"),e.k0s(),e.nrm(16,"textarea",7),e.DNE(17,T,2,0,"mat-error",6),e.k0s(),e.j41(18,"mat-form-field",4)(19,"mat-label"),e.EFF(20,"Total Rooms"),e.k0s(),e.nrm(21,"input",8),e.DNE(22,j,2,0,"mat-error",6)(23,A,2,0,"mat-error",6),e.k0s(),e.j41(24,"mat-form-field",4)(25,"mat-label"),e.EFF(26,"Monthly Rent"),e.k0s(),e.nrm(27,"input",9),e.DNE(28,b,2,0,"mat-error",6)(29,L,2,0,"mat-error",6),e.k0s(),e.j41(30,"mat-form-field",4)(31,"mat-label"),e.EFF(32,"Lease Start Date"),e.k0s(),e.nrm(33,"input",10)(34,"mat-datepicker-toggle",11)(35,"mat-datepicker",null,0),e.DNE(37,S,2,0,"mat-error",6),e.k0s(),e.j41(38,"mat-form-field",4)(39,"mat-label"),e.EFF(40,"Lease Duration (months)"),e.k0s(),e.nrm(41,"input",12),e.DNE(42,N,2,0,"mat-error",6)(43,y,2,0,"mat-error",6),e.k0s(),e.j41(44,"mat-form-field",4)(45,"mat-label"),e.EFF(46,"Status"),e.k0s(),e.j41(47,"mat-select",13)(48,"mat-option",14),e.EFF(49,"Available"),e.k0s(),e.j41(50,"mat-option",15),e.EFF(51,"Full"),e.k0s(),e.j41(52,"mat-option",16),e.EFF(53,"Maintenance"),e.k0s()(),e.DNE(54,U,2,0,"mat-error",6),e.k0s()(),e.j41(55,"div",17)(56,"button",18),e.EFF(57,"Cancel"),e.k0s(),e.j41(58,"button",19),e.EFF(59),e.k0s()()()()()()}if(2&s){let m,f,g,p,F,c,E,h,C,D;const O=e.sdS(36);e.R7$(4),e.JRh(o.isEditMode?"Edit Accomodation":"Add New Accomodation"),e.R7$(2),e.Y8G("formGroup",o.guestHouseForm),e.R7$(6),e.Y8G("ngIf",null==(m=o.guestHouseForm.get("name"))||null==m.errors?null:m.errors.required),e.R7$(5),e.Y8G("ngIf",null==(f=o.guestHouseForm.get("address"))||null==f.errors?null:f.errors.required),e.R7$(5),e.Y8G("ngIf",null==(g=o.guestHouseForm.get("totalRooms"))||null==g.errors?null:g.errors.required),e.R7$(),e.Y8G("ngIf",null==(p=o.guestHouseForm.get("totalRooms"))||null==p.errors?null:p.errors.min),e.R7$(5),e.Y8G("ngIf",null==(F=o.guestHouseForm.get("monthlyRent"))||null==F.errors?null:F.errors.required),e.R7$(),e.Y8G("ngIf",null==(c=o.guestHouseForm.get("monthlyRent"))||null==c.errors?null:c.errors.min),e.R7$(4),e.Y8G("matDatepicker",O),e.R7$(),e.Y8G("for",O),e.R7$(3),e.Y8G("ngIf",null==(E=o.guestHouseForm.get("leaseStartDate"))||null==E.errors?null:E.errors.required),e.R7$(5),e.Y8G("ngIf",null==(h=o.guestHouseForm.get("leaseDuration"))||null==h.errors?null:h.errors.required),e.R7$(),e.Y8G("ngIf",null==(C=o.guestHouseForm.get("leaseDuration"))||null==C.errors?null:C.errors.min),e.R7$(11),e.Y8G("ngIf",null==(D=o.guestHouseForm.get("status"))||null==D.errors?null:D.errors.required),e.R7$(4),e.Y8G("disabled",!o.guestHouseForm.valid),e.R7$(),e.SpI(" ",o.isEditMode?"Update":"Save"," ")}},dependencies:[R.MD,R.bT,r.X1,r.qT,r.me,r.Q0,r.BC,r.cb,r.j4,r.JD,l.RG,l.rl,l.nJ,l.TL,l.yw,H.fS,H.fg,k.Ve,k.VO,P.wT,_.X6,_.Vh,_.bZ,_.bU,I.Hl,I.$z,i.Hu,i.RN,i.m2,i.MM,i.dh,d.iI,d.Wk],styles:[".guesthouse-form-container[_ngcontent-%COMP%]{padding:20px}.guesthouse-form-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.guesthouse-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px;margin:20px 0}.guesthouse-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.guesthouse-form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;margin-top:20px}"]})}return t})()}}]);